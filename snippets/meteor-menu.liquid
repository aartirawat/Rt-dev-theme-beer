{% comment %}
  ---
  Documentation: https://meteor.heliumdev.com/help
  Version: 3.1.5
  The following snippet serves multiple utility functions for the Meteor Menu
  application by Helium.
  YOU SHOULD NOT BE EDITING THIS FILE.
  ANY CHANGES WILL BE OVERWRITTEN UPON SAVE!
  ---
{% endcomment %}

{% if meteor_links %}
  {% comment %}
    ---
    Used for recursively fetching sub-links for link lists
    ---
  {% endcomment %}
  {% capture meteor_output %}
    {% for link in meteor_links %}
      {% assign meteor_sub_links = link.links %}

      {% assign meteor_next_level = meteor_level | plus: 1 %}

      {% capture meteor_next_links %}
        {% if meteor_next_level <= 3 %}
          {% include 'meteor-menu', meteor_links: meteor_sub_links, meteor_level: meteor_next_level %}
        {% endif %}
      {% endcapture %}

      {% if link.object.image %}
        {% assign link_image = link.object.image %}
      {% elsif link.object.featured_image %}
        {% assign link_image = link.object.featured_image %}
      {% else %}
        {% assign link_image = nil %}
      {% endif %}

      {
        "title": {{ link.title | json }},
        "url": {{ link.url | json }},
        "object_id": {{ link.object.id | json }},
        {% if link_image %}
          "images": {
            "small": {{ link_image | img_url: '400x400' | json }},
            "medium": {{ link_image | img_url: '800x800' | json }},
            "large": {{ link_image | img_url: '1200x1200' | json }},
            "alt": {{ link_image.alt | json }}
          },
        {% endif %}
        "nest_level": {{ meteor_level }},
        "links": [{{ meteor_next_links }}]
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  {% endcapture %}

  {{ meteor_output | strip_newlines | strip }}
{% elsif load == 'head' %}
  {% comment %}
    ---
    Load scripts and styles in the HEAD tag
    ---
  {% endcomment %}
  <script>
    window.MeteorMenu = window.MeteorMenu || {};
  </script>
  <script type="text/javascript" src="https://cdn-meteor.heliumdev.com/embed/3.1.5/meteor.js?api_key=4a1817521789af67f7b92299e4c04b61750b31b400255646b9010811a08aad5c" async></script>
  <link rel="stylesheet" media="async" href="https://cdn-meteor.heliumdev.com/embed/3.1.5/meteor.css?api_key=4a1817521789af67f7b92299e4c04b61750b31b400255646b9010811a08aad5c" />
{% elsif load == 'footer' %}
  {% comment %}
    ---
    Load linklist data in the footer
    ---
  {% endcomment %}
  <link rel="stylesheet" href="https://cdn-meteor.heliumdev.com/embed/3.1.5/meteor.css?api_key=4a1817521789af67f7b92299e4c04b61750b31b400255646b9010811a08aad5c" />
  <script>
    {% capture data %}
      {
        "settings": {"app_proxy":"apps/meteor","z_index":9999,"mobile_breakpoint":"1024","disable_at_width":"","vertical_offset":"0","mobile_vertical_offset":"0","css":"","queries":""},
        "theme": {
          "name": "Empire",
          "version": "2.0.0"
        },
        "linklists": {
          "main-menu": {
            "links": [
              {% include 'meteor-menu', meteor_links: linklists["main-menu"].links, meteor_level: 1 %}
            ]
          }
        },
        "menus":
        [
          {
            "id": 2243,
            "title": "Brewing Equipment",
            "list_handle": "main-menu",
            "object_path": "/collections/brewing-equipment",
            "sub_list_handle": "",
            "template": "tidal",
            "object_id": "32718782508",
            "settings": {"size":"wide","action":"hover","animation":"none","font_size":"normal","color_text":"30,30,30,1","color_hover":"205,14,44,1","clickable_titles":"yes","color_background":"247,247,247,1","sub_column_width":"full","top_column_width":"narrow","color_mobile_text":"30,30,30,1","color_mobile_background":"247,247,247,1"},
            "handle": null,
            "manual_attach": false
          },
          {
            "id": 2241,
            "title": "Beer Recipe Kits",
            "list_handle": "main-menu",
            "object_path": "/collections/beer-recipe-kits",
            "sub_list_handle": "",
            "template": "tidal",
            "object_id": "35140042796",
            "settings": {"size":"wide","action":"hover","animation":"none","font_size":"normal","color_text":"30,30,30,1","color_hover":"205,14,44,1","clickable_titles":"yes","color_background":"247,247,247,1","sub_column_width":"full","top_column_width":"narrow","color_mobile_text":"30,30,30,1","color_mobile_background":"255,255,255,1"},
            "handle": null,
            "manual_attach": false
          },
          {
            "id": 2408,
            "title": "Wine Making",
            "list_handle": "main-menu",
            "object_path": "/collections/winemaking",
            "sub_list_handle": "",
            "template": "tidal",
            "object_id": "37203247148",
            "settings": {"size":"wide","action":"hover","animation":"none","font_size":"normal","color_text":"30,30,30,1","color_hover":"205,14,44,1","clickable_titles":"yes","color_background":"247,247,247,1","sub_column_width":"full","top_column_width":"narrow","color_mobile_text":"30,30,30,1","color_mobile_background":"247,247,247,1"},
            "handle": null,
            "manual_attach": false
          },
          {
            "id": 2471,
            "title": "Specialty \u0026 Gifts",
            "list_handle": "main-menu",
            "object_path": "/collections/gifts-specialty",
            "sub_list_handle": "",
            "template": "tidal",
            "object_id": "37640372268",
            "settings": {"size":"wide","action":"hover","animation":"none","font_size":"normal","color_text":"30,30,30,1","color_hover":"205,14,44,1","clickable_titles":"yes","color_background":"247,247,247,1","sub_column_width":"full","top_column_width":"narrow","color_mobile_text":"30,30,30,1","color_mobile_background":"255,255,255,1"},
            "handle": null,
            "manual_attach": false
          },
          {
            "id": 2266,
            "title": "Beer Ingredients",
            "list_handle": "main-menu",
            "object_path": "/collections/beer-ingredients",
            "sub_list_handle": "",
            "template": "tidal",
            "object_id": "36022485036",
            "settings": {"size":"wide","action":"hover","animation":"none","font_size":"normal","color_text":"30,30,30,1","color_hover":"205,14,44,1","clickable_titles":"yes","color_background":"247,247,247,1","sub_column_width":"full","top_column_width":"narrow","color_mobile_text":"30,30,30,1","color_mobile_background":"255,255,255,1"},
            "handle": null,
            "manual_attach": false
          },
          {
            "id": 2323,
            "title": "Kegging \u0026 Bottling",
            "list_handle": "main-menu",
            "object_path": "/collections/bottling-kegging",
            "sub_list_handle": "",
            "template": "tidal",
            "object_id": "36752850988",
            "settings": {"size":"wide","action":"hover","animation":"none","font_size":"normal","color_text":"30,30,30,1","color_hover":"205,14,44,1","clickable_titles":"yes","color_background":"247,247,247,1","sub_column_width":"full","top_column_width":"narrow","color_mobile_text":"30,30,30,1","color_mobile_background":"255,255,255,1"},
            "handle": null,
            "manual_attach": false
          },
          {
            "id": 2244,
            "title": "Starter Kits",
            "list_handle": "main-menu",
            "object_path": "/collections/beer-brewing-equipment-starter-kits",
            "sub_list_handle": "",
            "template": "tidal",
            "object_id": "37102845996",
            "settings": {"size":"wide","action":"hover","animation":"none","font_size":"normal","color_text":"30,30,30,1","color_hover":"205,14,44,1","clickable_titles":"yes","color_background":"247,247,247,1","sub_column_width":"full","top_column_width":"narrow","color_mobile_text":"30,30,30,1","color_mobile_background":"255,255,255,1"},
            "handle": null,
            "manual_attach": false
          }
        ]
      }
    {% endcapture %}

    MeteorMenu.data = {{ data | strip_newlines }};
    if (MeteorMenu.dataReady) { MeteorMenu.dataReady(); }
  </script>
{% endif %}